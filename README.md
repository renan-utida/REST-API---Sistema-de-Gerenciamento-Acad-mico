# 📚 REST API - Sistema de Gerenciamento Acadêmico

> Projeto desenvolvido como atividade acadêmica da FIAP utilizando Spring Boot, JDBC e Oracle Database.

## 📋 Descrição

Sistema REST API para gerenciamento de **Alunos** e **Professores** com operações CRUD completas. O projeto implementa uma arquitetura em camadas (Controller → Service → Repository) seguindo boas práticas de desenvolvimento e padrões de design.

---

## 🚀 Tecnologias Utilizadas

- **Java 17+**
- **Spring Boot 3.x**
- **Oracle Database** (JDBC)
- **Lombok** (redução de boilerplate)
- **Maven** (gerenciamento de dependências)
- **Insomnia** (testes de API)

---

## 📂 Estrutura do Projeto

```
restapi/
├── src/main/java/com/fiap/restapi/
│   ├── RestapiApplication.java          # Classe principal Spring Boot
│   ├── config/
│   │   └── ConnectionFactory.java       # Gerenciamento de conexão Oracle
│   ├── model/
│   │   ├── Aluno.java                   # Entidade Aluno
│   │   └── Professor.java               # Entidade Professor
│   ├── repository/
│   │   ├── AlunoRepository.java         # Acesso a dados - Aluno
│   │   └── ProfessorRepository.java     # Acesso a dados - Professor
│   ├── service/
│   │   ├── AlunoService.java            # Regras de negócio - Aluno
│   │   └── ProfessorService.java        # Regras de negócio - Professor
│   └── controller/
│       ├── AlunoController.java         # Endpoints REST - Aluno
│       └── ProfessorController.java     # Endpoints REST - Professor
├── scripts/
│   ├── createTable_Aluno.sql            # DDL tabela ALUNO
│   └── createTable_Professor.sql        # DDL tabela PROFESSOR
├── Collection_Aluno.json                # Imports do Insomnia
├── Collection_Professor.json            #
└── Collection_Professor.yaml            # Opcional caso o json do professor não rode
```

---

## 🔧 Pré-requisitos

Antes de começar, você precisa ter instalado:

- [Java JDK 17+](https://www.oracle.com/java/technologies/downloads/)
- [Maven 3.8+](https://maven.apache.org/download.cgi)
- [Oracle Database](https://www.oracle.com/database/) (ou acesso remoto)
- [Insomnia](https://insomnia.rest/download) ou [Postman](https://www.postman.com/downloads/) (para testes)
- IDE de sua preferência (IntelliJ IDEA, Eclipse, VS Code)

---

## ⚙️ Configuração do Banco de Dados

### 1. Criar as Tabelas

Execute os scripts SQL no Oracle:

**Tabela ALUNO:**
```sql
CREATE TABLE ALUNO (
    ID     NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME   VARCHAR2(150) NOT NULL,
    CURSO  VARCHAR2(150) NOT NULL
);
```

**Tabela PROFESSOR:**
```sql
CREATE TABLE PROFESSOR (
    ID           NUMBER(19) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME         VARCHAR2(150) NOT NULL,
    DEPARTAMENTO VARCHAR2(100) NOT NULL,
    EMAIL        VARCHAR2(150) NOT NULL,
    TITULACAO    VARCHAR2(80)
);

CREATE UNIQUE INDEX UK_PROFESSOR_EMAIL ON PROFESSOR(EMAIL);
```

### 2. Configurar Variáveis de Ambiente

Crie as seguintes variáveis de ambiente (ou edite diretamente em `ConnectionFactory.java`):

```bash
# Linux/Mac
export ORACLE_URL="jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl"
export ORACLE_USER="seu_usuario"
export ORACLE_PASSWORD="sua_senha"

# Windows (CMD)
set ORACLE_URL=jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl
set ORACLE_USER=seu_usuario
set ORACLE_PASSWORD=sua_senha

# Windows (PowerShell)
$env:ORACLE_URL="jdbc:oracle:thin:@oracle.fiap.com.br:1521:orcl"
$env:ORACLE_USER="seu_usuario"
$env:ORACLE_PASSWORD="sua_senha"
```

---

## 🏃 Como Executar

### 1. Clonar/Baixar o Projeto

```bash
git clone <url-do-repositorio>
cd restapi
```

### 2. Compilar o Projeto

```bash
mvn clean install
```

### 3. Executar a Aplicação

```bash
mvn spring-boot:run
```

Ou execute diretamente pela IDE (Run `RestapiApplication.java`).

**A aplicação estará disponível em:** `http://localhost:8080`

---

## 📡 Endpoints da API

### **ALUNOS** - Base: `/api/alunos`

| Método | Endpoint             | Descrição              | Status Codes    |
|--------|----------------------|------------------------|-----------------|
| POST   | `/api/alunos`        | Criar aluno            | 201, 400        |
| GET    | `/api/alunos`        | Listar todos           | 200             |
| GET    | `/api/alunos/{id}`   | Buscar por ID          | 200, 404        |
| PUT    | `/api/alunos/{id}`   | Atualizar aluno        | 200, 400, 404   |
| DELETE | `/api/alunos/{id}`   | Deletar aluno          | 204, 404        |

### **PROFESSORES** - Base: `/api/professores`

| Método | Endpoint                 | Descrição              | Status Codes    |
|--------|--------------------------|------------------------|-----------------|
| POST   | `/api/professores`       | Criar professor        | 201, 400        |
| GET    | `/api/professores`       | Listar todos           | 200             |
| GET    | `/api/professores/{id}`  | Buscar por ID          | 200, 404        |
| PUT    | `/api/professores/{id}`  | Atualizar professor    | 200, 400, 404   |
| DELETE | `/api/professores/{id}`  | Deletar professor      | 204, 404        |

---

## 📝 Exemplos de Requisições

### **Criar Aluno** (POST)

```bash
curl -X POST http://localhost:8080/api/alunos \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "João Silva",
    "curso": "Análise e Desenvolvimento de Sistemas"
  }'
```

**Response (201 Created):**
```json
{
  "id": 1,
  "nome": "João Silva",
  "curso": "Análise e Desenvolvimento de Sistemas"
}
```

### **Criar Professor** (POST)

```bash
curl -X POST http://localhost:8080/api/professores \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "Ana Silva",
    "departamento": "Computação",
    "email": "ana.silva@fiap.com.br",
    "titulacao": "Doutora"
  }'
```

**Response (201 Created):**
```json
{
  "id": 1,
  "nome": "Ana Silva",
  "departamento": "Computação",
  "email": "ana.silva@fiap.com.br",
  "titulacao": "Doutora"
}
```

### **Listar Todos os Alunos** (GET)

```bash
curl http://localhost:8080/api/alunos
```

**Response (200 OK):**
```json
[
  {
    "id": 1,
    "nome": "João Silva",
    "curso": "Análise e Desenvolvimento de Sistemas"
  },
  {
    "id": 2,
    "nome": "Maria Santos",
    "curso": "Engenharia de Software"
  }
]
```

### **Buscar Professor por ID** (GET)

```bash
curl http://localhost:8080/api/professores/1
```

**Response (200 OK):**
```json
{
  "id": 1,
  "nome": "Ana Silva",
  "departamento": "Computação",
  "email": "ana.silva@fiap.com.br",
  "titulacao": "Doutora"
}
```

### **Atualizar Aluno** (PUT)

```bash
curl -X PUT http://localhost:8080/api/alunos/1 \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "João Pedro Silva",
    "curso": "Engenharia de Software"
  }'
```

### **Deletar Professor** (DELETE)

```bash
curl -X DELETE http://localhost:8080/api/professores/1
```

**Response (204 No Content)**

---

## 🧪 Testando com Insomnia

### Importar Collections

1. Abra o **Insomnia**
2. Clique em **Application** → **Preferences** → **Data** → **Import Data**
3. Selecione o arquivo:
   - `Collection_Aluno.json`
   - `Collection_Professor.json`
4. As collections aparecerão automaticamente com todas as requisições configuradas

### Requisições Disponíveis

**Collection Alunos:**
- ✅ Listar
- ✅ Buscar
- ✅ Adicionar
- ✅ Atualizar
- ✅ Deletar

**Collection Professores:**
- ✅ Listar
- ✅ Buscar
- ✅ Adicionar
- ✅ Atualizar
- ✅ Deletar

---

## 🏗️ Arquitetura em Camadas

### **Controller Layer** (Apresentação)
- Recebe requisições HTTP
- Valida entrada básica
- Retorna códigos HTTP apropriados
- Não contém lógica de negócio

### **Service Layer** (Negócio)
- Implementa regras de negócio
- Valida dados (formato, tamanho, obrigatoriedade)
- Orquestra chamadas ao Repository
- Trata exceções de negócio

### **Repository Layer** (Dados)
- Acessa o banco de dados (JDBC)
- Executa operações CRUD
- Mapeia ResultSet para objetos Java
- Trata exceções SQL

### **Model Layer** (Entidades)
- Define estrutura dos dados
- Usa Lombok para reduzir código
- POJOs simples

---

## 🔍 Validações Implementadas

### **Aluno**
- `nome`: obrigatório, máximo 150 caracteres
- `curso`: obrigatório, máximo 150 caracteres
- `id`: deve ser > 0 para operações de busca/atualização/remoção

### **Professor**
- `nome`: obrigatório, máximo 150 caracteres
- `departamento`: obrigatório, máximo 100 caracteres
- `email`: obrigatório, formato válido (regex), máximo 150 caracteres, único no banco
- `titulacao`: opcional, máximo 80 caracteres
- `id`: deve ser > 0 para operações de busca/atualização/remoção

---

## 🛠️ Tecnologias e Padrões

### **Padrões de Projeto**
- ✅ **MVC** (Model-View-Controller) adaptado para REST
- ✅ **DAO** (Data Access Object) via Repository
- ✅ **Dependency Injection** (Spring)
- ✅ **Factory Pattern** (ConnectionFactory)

### **Boas Práticas**
- ✅ Separação de responsabilidades (SoC)
- ✅ SOLID principles
- ✅ RESTful API design
- ✅ Tratamento de exceções
- ✅ Validação de dados
- ✅ Uso de Optional para valores ausentes
- ✅ Try-with-resources para gestão de recursos

---

## 📊 Modelo de Dados

### **Diagrama ER Simplificado**

```
┌─────────────────┐         ┌──────────────────┐
│     ALUNO       │         │    PROFESSOR     │
├─────────────────┤         ├──────────────────┤
│ ID (PK)         │         │ ID (PK)          │
│ NOME            │         │ NOME             │
│ CURSO           │         │ DEPARTAMENTO     │
└─────────────────┘         │ EMAIL (UNIQUE)   │
                            │ TITULACAO        │
                            └──────────────────┘
```

---

## 🐛 Troubleshooting

### Erro de Conexão com Oracle
```
Verifique:
- URL do banco está correta
- Credenciais (usuário/senha) estão corretas
- Firewall não está bloqueando porta 1521
- Oracle está rodando e acessível
```

### Erro "Table not found"
```
Execute os scripts SQL:
- createTable_Aluno.sql
- createTable_Professor.sql
```

### Porta 8080 já está em uso
```
Altere a porta no application.properties:
server.port=8081
```

### Lombok não funciona na IDE
```
- IntelliJ: Instale plugin "Lombok"
- Eclipse: Adicione lombok.jar como Java Agent
- Habilite "Annotation Processing"
```

---

## 📚 Dependências Maven

```xml
<dependencies>
    <!-- Spring Boot Starter Web -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    
    <!-- Oracle JDBC Driver -->
    <dependency>
        <groupId>com.oracle.database.jdbc</groupId>
        <artifactId>ojdbc8</artifactId>
        <scope>runtime</scope>
    </dependency>
    
    <!-- Lombok -->
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <optional>true</optional>
    </dependency>
    
    <!-- Spring Boot Starter Test -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-test</artifactId>
        <scope>test</scope>
    </dependency>
</dependencies>
```

---

## 👥 Autores

Projeto desenvolvido como atividade acadêmica - FIAP

**Realizado por:**

[<img loading="lazy" src="https://github.com/user-attachments/assets/b4f96f4b-542e-4988-9bc1-b1acf22a41a1" width=115><br><sub>Renan Dias Utida</sub>](https://github.com/renan-utida)

### Linkedin: https://www.linkedin.com/in/renan-dias-utida-1b1228225/

**Link Repositorio:** https://github.com/renan-utida/REST-API---Sistema-de-Gerenciamento-Academico

### Orientado pelo Professor Salatiel Marinho

---

## 📄 Licença

Este projeto foi desenvolvido para fins educacionais.

